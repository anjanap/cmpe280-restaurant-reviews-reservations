<!DOCTYPE html>
<html>
<head>
  <title>Foodster</title>
    <script type="text/javascript" src="userinteractivity.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/simple-line-icons.css">
    <link rel="stylesheet" href="css/themify-icons.css">
    <link rel="stylesheet" href="css/set1.css">
    <link rel="stylesheet" href="css/style.css">


    <script src = "https://code.jquery.com/jquery-1.10.2.js"></script>
    <script src = "https://code.jquery.com/ui/1.10.4/jquery-ui.js"></script>

    <script>
       $(function() {
          $( "#tabs-1" ).tabs();
       });



//search button

    $(document).ready(function() {

$(function() {
   $('#searchbtn').attr('disabled', 'disabled');
});

$('input[type=text]').keyup(function() {

   if ($('#searchtxt').val()) {

       $('#searchbtn').removeAttr('disabled');
   } else {
       $('#searchbtn').attr('disabled', 'disabled');
   }
});
   });
</script>



    <script>

        function  signout() {

            {
                $.ajax({
                    url: 'http://localhost:3000/signout',
                    type: 'POST',
                    jsonpCallback: 'callback',
                    success: function () {
                        top.location.href = './index.html';
                    },
                    error: function (xhr, status, error) {
                        console.log('Error: ' + error.message);
                    }
                });
            }}
    </script>

    <style>
       #tabs-1{font-size: 14px; width: 80%;left:-10px}
       .ui-tabs .ui-tabs-nav
       {
       background: #ffffff;
       }

       .ui-tabs {
       position: absolute;
       padding: .2em;
       left: 30px;
       width: 95%;
       height: auto;
       top: 13%;
       }

       #tabs-1 .ui-tabs-nav {
            height: 2.60em;
            text-align: center;
            width:100%;
            right: 43px;
        }
      #tabs-1 .ui-tabs-nav li {
           display: inline-block;
           float: none;
           top: 0px;
           margin: 0em;
           width: 48%;
           padding-bottom: 0px;
       }
.container ui-tabs ui-widget ui-widget-content ui-corner-all{
  margin-left: -10px;
}
       .ui-widget-header {
          border: 1px solid #ffffff;
          color: #ff3a6d;
          font-weight: bold;
       }


       .ui-tabs .ui-tabs-panel{
       background:#ff3a6d;
       }
       .ui-tabs .ui-tabs-nav .ui-tabs-anchor{
       width:390px;
       }
    </style>



    <script>
    function MyAjaxFunction(a){
      var showtab=document.getElementById("displaylist");
      showtab.style.display="none";

      var formData = {
      'restaurant_name': a
       };

      $.ajax({
        url: 'http://localhost:3000/search',
        data: formData,
          type: 'POST',
          success: function (data) {
            var resultarr2='';
      var resultarr3='';
              resultarr2+='<section class="reserve-block">';
               resultarr2+=' <div class="container">';
                   resultarr2+=' <div class="row">';
                       resultarr2+='   <div class="col-md-6">';
                           resultarr2+='   <h5>'+data[0].restaurant_name+'</h5>';
                           resultarr2+='   <p><span></span></p>';
                           resultarr2+='   <p class="reserve-description">'+data[0].Cuisine+'</p>';
                           resultarr2+='   </div>';
                                               resultarr2+='           </div></div></section>';

                         resultarr2+='   <section class="light-bg booking-details_wrap">';
                           resultarr2+='   <div class="container">';
                               resultarr2+='<div class="row">';
                                   resultarr2+='    <div class="col-md-8 responsive-wrap">';
                                       resultarr2+='      <div class="booking-checkbox_wrap mt-4">';
                                           resultarr2+='          <h5>Reviews</h5>';
                                           resultarr2+='          <hr>';

                           for(var j=1;j<data.length;j++){
                               resultarr2+='        <div class="customer-review_wrap">';

                                   resultarr2+='              <p class="customer-text">'+data[j].Description+'</p>'
                                   resultarr2+='      </div>';
                                   resultarr2+='        <hr>';
                           }
                           resultarr2+='      </div>';
                           resultarr2+='  </div>';
                           resultarr2+='  <div class="col-md-4 responsive-wrap"><div class="contact-info">';
                               resultarr2+='        <div class="address">';
                                   resultarr2+='          <b><p>Address</p></b>';
                                   resultarr2+='          <p> '+ data[0].Address+'</p>';
                                   resultarr2+='    </div></div></div>';
                                   resultarr2+='  </div>';
                                   resultarr2+='</div>';
                                   resultarr2+='</section>';
resultarr3+='<div class="styled-heading"> <br/><br/><br/> <h3>Give Review or Reserve a table </h3> </div>'
            document.getElementById("display2").innerHTML=resultarr2;
            document.getElementById("display3").innerHTML=resultarr3;
            var showtab=document.getElementById("tabs-1");
            showtab.style.display="block";

          },
          error: function (xhr, status, error) {
              console.log('Error: ' + error.message);
            },
          });
    }//ajaxfunction
        var resultarr='';
        var resultarr1='';
          $(document).ready(function() {
             $.ajax({
                        url: 'http://localhost:3000/getrestaurants',
                           type: 'GET',
                           success: function (data) {
                             temp=data;
                             console.log(data[0].restaurant_name);


                           for(var i = 0; i<data.length/2; i++){
                             var abc = "abc"
                           resultarr+='<div class="featured-place-wrap">';
                            resultarr+="<button onclick='MyAjaxFunction(\""+ data[i].restaurant_name + "\");'>";
                                resultarr+='<img src="images/featured11.jpg" class="img-fluid" alt="#">';
                                resultarr+='<span class="featured-rating-green">' + data[i].rating + '</span>';
                                resultarr+='<div class="featured-title-box">';
                                    resultarr+='<h6>' + data[i].restaurant_name + '</h6>';

                                    resultarr+='<ul>';

                                            resultarr+='<li><p>' + data[i].Address+ '</p></li>';

                                    resultarr+='</ul>';
                                resultarr+='</div>';
                            resultarr+='</button>';
                           resultarr+='</div>';
                           }

                           for(var i = data.length/2; i<data.length; i++){
                           resultarr1+='<div class="featured-place-wrap">';
                            resultarr1+="<button onclick='MyAjaxFunction(\""+ data[i].restaurant_name + "\");'>";
                                resultarr1+='<img src="images/featured11.jpg" class="img-fluid" alt="#">';
                                resultarr1+='<span class="featured-rating-green">' + data[i].rating + '</span>';
                                resultarr1+='<div class="featured-title-box">';
                                    resultarr1+='<h6>' + data[i].restaurant_name + '</h6>';

                                    resultarr1+='<ul>';

                                            resultarr1+='<li><p>' + data[i].Address+ '</p></li>';

                                    resultarr1+='</ul>';
                                resultarr1+='</div>';
                            resultarr1+='</button>';
                           resultarr1+='</div>';
                           }

                             document.getElementById("display").innerHTML=resultarr;
                             document.getElementById("display1").innerHTML=resultarr1;

                           },
                           error: function (xhr, status, error) {
                               console.log('Error: ' + error.message);
                             },
                           });
                      event.preventDefault();
                  });
          </script>

    <script>
    var resultarr2 = '';
    var resultarr3 = '';
      $(document).ready(function() {

          $("#form")
              .submit(function(event) {
                var showtab=document.getElementById("displaylist");
                showtab.style.display="none";
                  var formData = {
                  'restaurant_name': $('input[name=restaurant_name]').val()
                   };
                   $.ajax({
                     url: 'http://localhost:3000/search',
                     data: formData,
                       type: 'POST',
                       success: function (data) {
                         if(data[0] == false){
                             alert("No Resturants found with name:" +formData.restaurant_name);
                             top.location.href = './home.html';
                         }
                         else{
                           var resultarr2='';
                     var resultarr3='';
                           resultarr2+='<section class="reserve-block">';
                            resultarr2+=' <div class="container">';
                                resultarr2+=' <div class="row">';
                                    resultarr2+='   <div class="col-md-6">';
                                        resultarr2+='   <h5>'+data[0].restaurant_name+'</h5>';
                                        resultarr2+='   <p><span></span></p>';
                                        resultarr2+='   <p class="reserve-description">'+data[0].Cuisine+'</p>';
                                        resultarr2+='   </div>';
                                                            resultarr2+='     </div></div></section>';

                                      resultarr2+='   <section class="light-bg booking-details_wrap">';
                                        resultarr2+='   <div class="container">';
                                            resultarr2+='<div class="row">';
                                                resultarr2+='    <div class="col-md-8 responsive-wrap">';
                                                    resultarr2+='      <div class="booking-checkbox_wrap mt-4">';
                                                        resultarr2+='          <h5>Reviews</h5>';
                                                        resultarr2+='          <hr>';

                                        for(var j=1;j<data.length;j++){
                                            resultarr2+='        <div class="customer-review_wrap">';

                                                resultarr2+='              <p class="customer-text">'+data[j].Description+'</p>'
                                                resultarr2+='      </div>';
                                                resultarr2+='        <hr>';
                                        }
                                        resultarr2+='      </div>';
                                        resultarr2+='  </div>';
                                        resultarr2+='  <div class="col-md-4 responsive-wrap"><div class="contact-info">';
                                            resultarr2+='        <div class="address">';
                                                resultarr2+='          <b><p>Address</p></b>';
                                                resultarr2+='          <p> '+ data[0].Address+'</p>';
                                                resultarr2+='    </div></div></div>';
                                                resultarr2+='  </div>';
                                                resultarr2+='</div>';
                                                resultarr2+='</section>';
                          resultarr3+='<div class="styled-heading"> <br/><br/><br/> <h3>Give Review or Reserve a table </h3> </div>'

                         document.getElementById("display2").innerHTML=resultarr2;
                         document.getElementById("display3").innerHTML=resultarr3;


                         var showtab=document.getElementById("tabs-1");
                         showtab.style.display="block";

                       }},
                       error: function (xhr, status, error) {
                           console.log('Error: ' + error.message);
                         },
                       });
                  event.preventDefault();
              });
      });
      </script>
</head>
<body>

  <!-- HEADER -->
  <div class="nav-menu">
          <div class="container-fluid fixed">
              <div class="row">
                  <div class="col-md-12">
                      <nav class="navbar navbar-expand-lg navbar-light">
                          <a class="navbar-brand" href="#">Foodster</a>
                          <div class="collapse navbar-collapse justify-content-end">
                              <ul class="navbar-nav">
                                  <li class="nav-item active">
                                      <a class="nav-link" href="#foot">About</a>
                                  </li>
                                  <li><a href="#" onclick="signout()" class="btn btn-outline-light top-btn">Logout</a></li>
                              </ul>
                          </div>
                      </nav>
                  </div>
              </div>
          </div>
  </div>

  <!-- SEARCH -->
    <section class="slider d-flex align-items-center">
        <div class="container">
            <div class="row d-flex justify-content-center">
                <div class="col-md-12">
                    <div class="slider-title_box">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="slider-content_wrap">
                                </div>
                            </div>
                        </div>
                        <div class="row d-flex justify-content-center">
                            <div class="col-md-10">
                                <form id="form" class="form-wrap mt-4">
                                    <div class="btn-group" role="group" aria-label="Basic example">
                                        <input type="text" id="searchtxt" placeholder="What are your looking for?" class="btn-group1" name="restaurant_name">
                                        <button type="submit" id="searchbtn" class="btn-form"><span class="icon-magnifier search-icon"></span>SEARCH<i class="pe-7s-angle-right"></i></button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

  <!--=== DISPLAY ===-->

<div id="display2" >
</div>

<div id="display3" >
</div>

<div class="container" id = "tabs-1" style="display:none">

   <ul>
      <li><a href = "reviewtab.html">Review</a></li>
      <li><a href = "reservetab.html">Reserve</a></li>
   </ul>
</div>

<div id="displaylist" class="container-fluid" style="display:block;">

        <div class="styled-heading">
            <br/><br/><br/>
                <h3>All Restaurants</h3>
        </div>
<div class="row">
    <div class="col-sm-2 col-lg-2 col-xl-2s featured-responsive"></div>
    <div id="display" class="col-sm-4 col-lg-4 col-xl-4 featured-responsive"></div>
    <div id="display1" class="col-sm-4 col-lg-4 col-xl-4 featured-responsive"></div>
</div>
</div>

<!--==== FOOTER ===-->
<br/><br/>
<br/><br/>
<footer class="main-block dark-bg">
    <div class="container" id="foot">
        <div class="row">
            <div class="col-md-12">
                <div class="copyright">
                    <ul>
                        <li><span>Team Dynamic</span></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</footer>


</body>
</html>
